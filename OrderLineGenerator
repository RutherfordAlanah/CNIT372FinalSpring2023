
drop table orderlineitem CASCADE CONSTRAINTS; 
CREATE TABLE orderlineitem (
    Orderline     	number GENERATED by default on null as IDENTITY(START with 200000 INCREMENT by 1) PRIMARY KEY,
    OrderID         number(8,0),
    ProductID       number(8,0),
    Quantitiy       number(2,0),
    FOREIGN key(OrderID) references orders (OrderID),
    FOREIGN key(ProductID) references products (ProductID)
);

--insert into;
--might need  a nested sql statment


CREATE OR REPLACE PROCEDURE InsertingToOrderLineITem
    
AS
    v_OrderID orders.OrderID%TYPE;
    v_ProductID number;
    v_Quanitity number(3);

 	CURSOR OLI IS
    SELECT floor(dbms_random.value(500000,500199))as OrderID, floor(dbms_random.value(30000110,30000219))as ProductID,floor(dbms_random.value(1,3))as Quanitity into v_OrderID, v_ProductID, v_Quanitity
    FROM orders;

	begin
		FOR current_Order IN OLI LOOP
        	v_OrderID := current_Order.OrderID;
        	v_ProductID := current_Order.ProductID;
			v_Quanitity:= current_Order.Quanitity;
        	INSERT into orderlineitem VALUES(null,v_OrderID,v_ProductID,v_Quanitity);
        end loop;
END InsertingToOrderLineITem;
/
execute InsertingToOrderLineITem;
/
